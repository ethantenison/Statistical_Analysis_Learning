---
title: "Single and Multiple Regression"
author: "Ethan Tenison"
date: "2/4/2020"
output: html_document
---

# Q1: Interactioneffects in a linear regression 


### (a)Write an equation to specify a linear regression model for this problem. You will need to create/define variables.What is the unit of analysis? 

$\hat{y}$ = $\beta_{0}$ + $\beta_{s}$$X_{s}$ + $\beta_{m}$$X_{m}$ + $\varepsilon$

$\hat{y}$ = the estimated property value <br />
$\beta_{0}$ = intercept <br />
$\beta_{s}$ = coefficient for single-family home <br />
$X_{s}$ = dummy variable that is 1 for single-family and 0 for not <br />
$\beta_{m}$ = coefficient for multi-unit home <br />
$X_{m}$ = dummy variable that is 1 for multi-unit and 0 for not <br />
$\varepsilon$ = the error term <br />
<br />
The unit of analysis is property value in the neighborhood 


### (b)Interpret the coefficients in the equation from (a).
The coefficients represent on average how much being a permitted single-family and/or multi-unit neighborhood has on property value. 

### (c)For all of the possible combinations of “states” of predictor variables, give estimates for property values.
Single-Family only: $\hat{y}$ = $\beta_{0}$ + $\beta_{s}$$(1)$ +  $\beta_{m}$$(0)$ +$\varepsilon$ <br />
Multi-unit only: $\hat{y}$ = $\beta_{0}$ + $\beta_{s}$$(0)$ +  $\beta_{m}$$(1)$ +$\varepsilon$ <br />
Both:  $\hat{y}$ = $\beta_{0}$ + $\beta_{s}$$(1)$ +  $\beta_{m}$$(1)$ +$\varepsilon$ 

### (d)What is the expected difference between single-family YES multi-unit NO neighborhood and a single-family YES multi-unit YES neighborhood?
($\beta_{0}$ + $\beta_{s}$$(1)$ +  $\beta_{m}$$(1)$ +$\varepsilon$) - ($\beta_{0}$ + $\beta_{s}$$(1)$ +  $\beta_{m}$$(0)$ +$\varepsilon$) <br />
=  $\beta_{m}$$(1)$

### (e)Does allowing multi-unit housing in single-family neighborhoods cause property values to change? Why or why not?
It depends on the coefficient. Is it statistically different from zero or not? If it is, than adding multi-unit housing to a single-family neighborhood could (on average) increase or decrease property value. 

### (f)To provide the best possible information to the council, what might you –as an analyst –need? What might ruin your findings?
In order to construct a good model I would need data on all the relevant predictors of property value. For example, the existence of a park in the neighborhood might have an impact. The findings might be ruined if the model leaves out some important predictor variable like the location of the neighborhood within the city. Neighborhoods in Mt.Bonnel are going to have a higher property value than on Rundberg regardless of whether it's a single-family or multi-unit neighborhood. 
<br />
<br />
<br />

# Q2: Applying Multiple Linear Regressionto data.

### (a)Produce a scatterplot matrix which includes the variables SalePrice, GarageCars, Age, OverallQual, and OverallCond.Circle any relationship that appears to be non-linear. 
```{r Interation_Effects, message=FALSE}
library(dplyr)
library(janitor)

df <- read.csv("austin_house_price.csv")
df <- clean_names(df)
a <- select(df, sale_price, garage_cars, age, overall_qual, overall_cond)
pairs(a, )


```

### (b)Compute the matrix of correlations between the variablesSalePrice, GarageCars, Age, OverallQual, and OverallCond. Between which 2 variables is the highest correlation?
The two variables with the highest correlation are overall_qual and sale_price at 0.79098160
```{r matrix_correlation}
b = cor(a)
b

```

### (c) Perform a multiple linear regression with SalePrice as the response and other variables as the predictors. Use as many variables as you need to improve the model and justify your decision. Is there a relationship between the predictors and the response? What does the coefficient for the age variable suggest? 

I included all of the variables except tot_rms_abv_grd because that would have double counted rooms. All of them were significant were signficant at the 95% level except for age and bsmt_half_bath. The p-value for age was higher than .2, which tells us that we can't rule out the possibility that age has zero impact on property value. Additionally, removing age from the model only changes the adj r squared by .0001

```{r mult_regression}

 

c = lm(sale_price ~ garage_cars + age + overall_qual + overall_cond + bsmt_full_bath + bsmt_half_bath + full_bath + half_bath + bedroom_abv_gr + kitchen_abv_gr + fireplaces, data=df)
summary(c)

```



### (d) Include the variable Age as a predictor in your model. Try a few different transformations of the Age variable, such as log(X), √X, X2. Comment on your findings.

Both log and sqrt produced significant results, but squaring did not. 

```{r transforming_age}
d = df
d = filter(d, age != 0)
d = lm(sale_price ~ garage_cars + log(age) + overall_qual + overall_cond + bsmt_full_bath + bsmt_half_bath + full_bath + half_bath + bedroom_abv_gr + kitchen_abv_gr + fireplaces, data=d,)
summary(d)

```

### (e) Summarize what you know now about Austin home prices and garages.

The variables that have the greatest impact on property value are its overal quality, whether it has full bathrooms, and fire places. Based on the model, kitches actually have a negative impact on the property value, but this might be because properties without kitchens are probably businesses.The age of a property has virtually no impact on property value. This might be because homes are renovated and people value historic properties.   